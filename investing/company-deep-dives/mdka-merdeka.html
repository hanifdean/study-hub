<!DOCTYPE html>
<html lang="en" data-theme="dark">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Merdeka Copper Gold (MDKA) ‚Äî Company Deep Dive</title>
<style>
  @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap');

  * { margin: 0; padding: 0; box-sizing: border-box; }
  :root {
    --bg: #0f0f14;
    --surface: #171720;
    --surface-alt: #1f1f2a;
    --surface-hover: #242433;
    --border: #2a2a35;
    --border-alt: #333344;
    --text: #ece9e3;
    --text-secondary: #d5d1c7;
    --text-muted: #9a9488;
    --text-dim: #766f64;
    --text-dimmer: #5b554c;
    --accent: #f59e0b;
    --accent-soft: rgba(245, 158, 11, 0.14);
    --accent-glow: rgba(245, 158, 11, 0.2);
    --highlight: #fbbf24;
    --green: #34d399;
    --red: #f87171;
  }

  [data-theme="light"] {
    --bg: #f8f6f2;
    --surface: #ffffff;
    --surface-alt: #f5f3ef;
    --surface-hover: #faf8f5;
    --border: #e5e0d8;
    --border-alt: #d5d0c8;
    --text: #2c2a26;
    --text-secondary: #4a4640;
    --text-muted: #6b6560;
    --text-dim: #8a8580;
    --text-dimmer: #a5a09a;
    --accent: #d97706;
    --accent-soft: rgba(217, 119, 6, 0.1);
    --accent-glow: rgba(217, 119, 6, 0.15);
    --highlight: #b45309;
    --green: #059669;
    --red: #dc2626;
  }

  body {
    font-family: 'Inter', -apple-system, sans-serif;
    background: var(--bg);
    color: var(--text);
    padding: 40px 24px;
    min-height: 100vh;
    transition: background 0.3s ease, color 0.3s ease;
  }

  .page-layout {
    max-width: 1200px;
    margin: 0 auto;
    display: flex;
    gap: 28px;
    align-items: flex-start;
  }

  .content { flex: 1; min-width: 0; }

  .container { max-width: 980px; }

  .top-bar {
    display: flex;
    align-items: center;
    justify-content: space-between;
    margin-bottom: 20px;
  }

  .back-link {
    font-size: 13px;
    color: var(--text-muted);
    text-decoration: none;
    display: flex;
    align-items: center;
    gap: 6px;
    transition: color 0.2s;
  }
  .back-link:hover { color: var(--accent); }

  .theme-toggle {
    background: none;
    border: 1.5px solid var(--border);
    border-radius: 8px;
    padding: 6px 10px;
    cursor: pointer;
    font-size: 16px;
    color: var(--text-muted);
    transition: border-color 0.2s, color 0.2s;
  }
  .theme-toggle:hover { border-color: var(--accent); color: var(--accent); }

  h1 {
    font-size: 30px;
    font-weight: 800;
    margin-bottom: 8px;
    color: var(--highlight);
  }

  .subtitle {
    font-size: 14px;
    color: var(--text-dim);
    margin-bottom: 28px;
    font-weight: 500;
  }

  .section {
    margin-bottom: 32px;
    animation: fadeUp 0.6s ease-out both;
  }

  .section h2 {
    font-size: 18px;
    font-weight: 700;
    margin-bottom: 14px;
    display: flex;
    align-items: center;
    gap: 8px;
  }

  .card {
    background: var(--surface);
    border: 1px solid var(--border);
    border-radius: 16px;
    padding: 24px;
  }

  .stats-grid {
    display: grid;
    grid-template-columns: repeat(4, 1fr);
    gap: 12px;
    margin-bottom: 24px;
  }

  .stat-card {
    background: var(--surface);
    border: 1px solid var(--border);
    border-radius: 14px;
    padding: 18px;
  }

  .stat-card .label {
    font-size: 11px;
    text-transform: uppercase;
    letter-spacing: 1px;
    color: var(--text-muted);
    font-weight: 700;
  }
  .stat-card .value {
    margin-top: 10px;
    font-size: 20px;
    font-weight: 700;
  }
  .stat-card .note {
    margin-top: 6px;
    font-size: 12px;
    color: var(--text-dim);
  }

  .pill-row {
    display: flex;
    flex-wrap: wrap;
    gap: 8px;
    margin-top: 10px;
  }
  .pill {
    font-size: 11px;
    font-weight: 600;
    padding: 4px 10px;
    border-radius: 999px;
    background: var(--surface-alt);
    border: 1px solid var(--border-alt);
    color: var(--text-muted);
  }

  .table-wrap {
    background: var(--surface);
    border: 1px solid var(--border);
    border-radius: 16px;
    padding: 18px;
    overflow-x: auto;
  }

  table {
    width: 100%;
    border-collapse: collapse;
    font-size: 13px;
  }
  thead th {
    text-align: left;
    padding: 10px 12px;
    color: var(--text-muted);
    font-size: 11px;
    letter-spacing: 0.6px;
    text-transform: uppercase;
    border-bottom: 1px solid var(--border);
  }
  tbody td {
    padding: 12px;
    border-bottom: 1px solid var(--border);
  }
  tbody tr:last-child td { border-bottom: none; }
  tbody td.num { text-align: right; font-variant-numeric: tabular-nums; }
  tbody tr.highlight td { color: var(--highlight); font-weight: 600; }

  .two-col {
    display: grid;
    grid-template-columns: 1.1fr 0.9fr;
    gap: 18px;
  }

  .list {
    display: grid;
    gap: 10px;
    font-size: 13px;
    color: var(--text-secondary);
  }
  .list strong { color: var(--text); }

  .case-grid {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 14px;
  }
  .case-card {
    border-radius: 14px;
    padding: 18px;
    border: 1px solid var(--border);
    background: var(--surface);
  }
  .case-card.bull { border-color: rgba(52, 211, 153, 0.4); background: rgba(52, 211, 153, 0.06); }
  .case-card.bear { border-color: rgba(248, 113, 113, 0.4); background: rgba(248, 113, 113, 0.05); }
  .case-card h3 { font-size: 14px; margin-bottom: 8px; }
  .case-card ul { padding-left: 16px; font-size: 12px; color: var(--text-secondary); line-height: 1.6; }

  .verdict {
    background: linear-gradient(135deg, rgba(245, 158, 11, 0.15), transparent);
    border: 1px solid rgba(245, 158, 11, 0.4);
  }

  /* Inline jargon links */
  .jargon {
    color: var(--accent);
    text-decoration: none;
    border-bottom: 1.5px dotted var(--accent);
    cursor: pointer;
    transition: color 0.2s, border-color 0.2s;
  }
  .jargon:hover { color: var(--highlight); border-color: var(--highlight); }
  .jargon-def { scroll-margin-top: 24px; }
  .jargon-def:target {
    outline: 2px solid var(--accent);
    outline-offset: 4px;
    border-radius: 10px;
    animation: jargon-flash 1.2s ease;
  }
  @keyframes jargon-flash {
    0%, 100% { outline-color: transparent; }
    20%, 80% { outline-color: var(--accent); }
  }
  .jargon-back {
    font-size: 11px;
    color: var(--text-muted);
    text-decoration: none;
    margin-left: 6px;
    opacity: 0.7;
    transition: opacity 0.2s, color 0.2s;
  }
  .jargon-back:hover { opacity: 1; color: var(--accent); }

  .section-nav {
    position: sticky;
    top: 96px;
    width: 220px;
    background: var(--surface);
    border: 1px solid var(--border);
    border-radius: 14px;
    padding: 16px;
    height: fit-content;
    max-height: calc(100vh - 140px);
    overflow: auto;
  }
  .section-nav-title {
    font-size: 11px;
    letter-spacing: 1px;
    text-transform: uppercase;
    color: var(--text-dim);
    margin-bottom: 10px;
    font-weight: 700;
  }
  .section-nav-links {
    display: flex;
    flex-direction: column;
    gap: 6px;
  }
  .section-nav a {
    display: block;
    text-decoration: none;
    color: var(--text-muted);
    font-size: 13px;
    padding: 6px 8px;
    border-radius: 8px;
    border: 1px solid transparent;
    transition: color 0.2s, background 0.2s, border-color 0.2s;
  }
  .section-nav a:hover { color: var(--accent); border-color: var(--border); background: var(--surface-hover); }
  .section-nav a.active { color: var(--accent); background: var(--accent-soft); border-color: var(--accent); }

  html { scroll-behavior: smooth; }

  @keyframes fadeUp {
    from { opacity: 0; transform: translateY(16px); }
    to { opacity: 1; transform: translateY(0); }
  }

  @media (max-width: 900px) {
    .stats-grid { grid-template-columns: repeat(2, 1fr); }
    .two-col { grid-template-columns: 1fr; }
    .case-grid { grid-template-columns: 1fr; }
  }

  @media (max-width: 768px) {
    body { padding: 24px 16px; }
    .page-layout { flex-direction: column; gap: 12px; }
    .section-nav {
      position: sticky;
      top: 0;
      width: 100%;
      padding: 8px;
      border-radius: 12px;
      overflow-x: auto;
      overflow-y: hidden;
    }
    .section-nav-title { display: none; }
    .section-nav-links { flex-direction: row; gap: 8px; }
    .section-nav a {
      white-space: nowrap;
      font-size: 12px;
      padding: 6px 12px;
      border-radius: 999px;
      border-color: var(--border);
      background: var(--surface);
    }
    .section-nav a.active { border-color: var(--accent); background: var(--accent-soft); color: var(--accent); }
  }
</style>
</head>
<body>
<div class="page-layout">
  <nav class="section-nav" aria-label="Section navigation">
    <div class="section-nav-title">On this page</div>
    <div class="section-nav-links" id="section-nav-links"></div>
  </nav>
  <main class="content">
    <div class="container">
      <div class="top-bar">
        <a href="../../" class="back-link">‚Üê Back to Study Hub</a>
        <button class="theme-toggle" onclick="toggleTheme()" title="Toggle light/dark mode">
          <span id="theme-icon">‚òÄÔ∏è</span>
        </button>
      </div>

      <h1>Merdeka Copper Gold (MDKA) ‚Äî Company Deep Dive</h1>
      <p class="subtitle">Multi-commodity growth platform across gold, copper, and nickel with a step-change in output from Pani Gold and MBMA battery materials.</p>

      <div class="stats-grid">
        <div class="stat-card">
          <div class="label">Ticker</div>
          <div class="value">MDKA.JK</div>
          <div class="note">Diversified mining</div>
        </div>
        <div class="stat-card">
          <div class="label">FY2025 Revenue</div>
          <div class="value">Rp31.69T</div>
          <div class="note">Gold + copper + nickel</div>
        </div>
        <div class="stat-card">
          <div class="label">Gold Output</div>
          <div class="value">103k oz</div>
          <div class="note">Tujuh Bukit Gold</div>
        </div>
        <div class="stat-card">
          <div class="label">Liquidity</div>
          <div class="value">$824M</div>
          <div class="note">$364M cash + $460M undrawn</div>
        </div>
      </div>

      <section class="section" id="company-overview">
        <h2>üè¢ Company Overview</h2>
        <div class="card">
          <p style="font-size:13px;color:var(--text-secondary);line-height:1.7;">
            Merdeka Copper Gold (MDKA) is a diversified Indonesian miner with producing gold and copper operations and fast-growing nickel exposure via <a href="#jargon-mbma" class="jargon">MBMA</a>. The near-term story is a gold production step-up driven by Pani Gold (via <a href="emas-merdeka-gold.html" class="jargon">EMAS</a>) and a longer-term copper optionality from the Tujuh Bukit underground project.
          </p>
          <div class="pill-row">
            <span class="pill">Multi-commodity (Au/Cu/Ni)</span>
            <span class="pill">Tujuh Bukit + Wetar</span>
            <span class="pill">Pani Gold via EMAS</span>
            <span class="pill">MBMA battery materials</span>
            <span class="pill">2026 gold surge</span>
          </div>
        </div>
      </section>

      <section class="section" id="key-metrics">
        <h2>üìå Key Metrics</h2>
        <div class="table-wrap" style="margin-bottom:16px;">
          <table>
            <thead>
              <tr>
                <th>Metric (FY2025)</th>
                <th class="num">Result</th>
                <th class="num">Notes</th>
              </tr>
            </thead>
            <tbody>
              <tr class="highlight">
                <td>Revenue</td>
                <td class="num">Rp31.69T</td>
                <td class="num">Gold + copper + nickel</td>
              </tr>
              <tr>
                <td>Gold production (TB Gold)</td>
                <td class="num">103,156 oz</td>
                <td class="num">104,168 oz sold @ $3,138/oz</td>
              </tr>
              <tr>
                <td>Copper production (Wetar)</td>
                <td class="num">10,454 tons</td>
                <td class="num">Producing asset</td>
              </tr>
              <tr>
                <td>Nickel saprolite</td>
                <td class="num">7.0M <a href="#jargon-wmt" class="jargon">wmt</a></td>
                <td class="num">+42% YoY via MBMA</td>
              </tr>
              <tr>
                <td>Nickel limonite</td>
                <td class="num">14.7M wmt</td>
                <td class="num">+45% YoY via MBMA</td>
              </tr>
              <tr>
                <td>Liquidity</td>
                <td class="num">$824M</td>
                <td class="num">Cash + undrawn facilities</td>
              </tr>
            </tbody>
          </table>
          <p style="font-size:12px;color:var(--text-muted);margin-top:10px;">MDKA is transitioning from single-asset gold into a diversified mining platform with scale growth in 2026‚Äì2032.</p>
        </div>
      </section>

      <section class="section" id="investment-thesis">
        <h2>üí° Investment Thesis</h2>
        <div class="card">
          <div class="list">
            <div><strong>Gold production step-change:</strong> 2026 target of 180‚Äì205k oz as Pani Gold ramps alongside Tujuh Bukit, nearly doubling FY2025 output.</div>
            <div><strong>Nickel leverage to EV chain:</strong> MBMA‚Äôs growing saprolite/limonite volumes support battery materials positioning.</div>
            <div><strong>Copper optionality:</strong> Tujuh Bukit underground copper project provides long-duration growth beyond the gold cycle.</div>
            <div><strong>Balance sheet capacity:</strong> $364M cash plus $460M undrawn gives room for construction and ramp-up phases.</div>
          </div>
        </div>
      </section>

      <section class="section" id="asset-breakdown">
        <h2>‚õèÔ∏è Asset-by-Asset Breakdown</h2>
        <div class="table-wrap" style="margin-bottom:16px;">
          <table>
            <thead>
              <tr>
                <th>Asset</th>
                <th class="num">Status</th>
                <th class="num">FY2025 Output / Notes</th>
              </tr>
            </thead>
            <tbody>
              <tr class="highlight">
                <td>Tujuh Bukit Gold (East Java)</td>
                <td class="num">Producing</td>
                <td class="num">103k oz gold</td>
              </tr>
              <tr>
                <td>Tujuh Bukit Copper (Underground)</td>
                <td class="num">Dev. stage</td>
                <td class="num">Long-term copper growth option</td>
              </tr>
              <tr>
                <td>Wetar Copper</td>
                <td class="num">Producing</td>
                <td class="num">10.4k tons copper</td>
              </tr>
              <tr>
                <td>Pani Gold (via EMAS)</td>
                <td class="num">Construction</td>
                <td class="num">~79k oz target 2026, ramp to 500k oz by 2032</td>
              </tr>
              <tr>
                <td>Nickel (via MBMA)</td>
                <td class="num">Producing</td>
                <td class="num">7.0M wmt saprolite + 14.7M wmt limonite</td>
              </tr>
            </tbody>
          </table>
        </div>
        <div class="table-wrap">
          <table>
            <thead>
              <tr>
                <th>2026 Targets</th>
                <th class="num">Guidance</th>
                <th class="num">Notes</th>
              </tr>
            </thead>
            <tbody>
              <tr class="highlight">
                <td>Gold production</td>
                <td class="num">180‚Äì205k oz</td>
                <td class="num">Pani + Tujuh Bukit</td>
              </tr>
              <tr>
                <td>Nickel saprolite</td>
                <td class="num">8‚Äì10M wmt</td>
                <td class="num">MBMA ramp</td>
              </tr>
              <tr>
                <td>Nickel limonite</td>
                <td class="num">20‚Äì25M wmt</td>
                <td class="num">HPAL feedstock growth</td>
              </tr>
            </tbody>
          </table>
        </div>
      </section>

      <section class="section" id="growth-catalysts">
        <h2>üöÄ Growth Catalysts</h2>
        <div class="card">
          <div class="list">
            <div><strong>Pani Gold first pour:</strong> EMAS Q1 2026 production start is the key step-change catalyst.</div>
            <div><strong>Gold volume acceleration:</strong> 2026 guidance implies ~2x output vs FY2025.</div>
            <div><strong>Nickel scale-up:</strong> MBMA saprolite/limonite growth improves downstream positioning.</div>
            <div><strong>Copper project milestones:</strong> Progress at Tujuh Bukit underground would extend MDKA‚Äôs commodity mix.</div>
          </div>
        </div>
      </section>

      <section class="section" id="risks">
        <h2>‚ö†Ô∏è Risks</h2>
        <div class="card">
          <div class="list">
            <div><strong>Pani execution risk:</strong> Construction delays or ramp hiccups would push back the gold surge.</div>
            <div><strong>Nickel price volatility:</strong> Battery materials pricing pressure impacts MBMA economics.</div>
            <div><strong>Complex group structure:</strong> Multiple listed vehicles (MBMA, EMAS) add governance complexity.</div>
            <div><strong>Commodity cyclicality:</strong> Gold, copper, and nickel each face distinct downturn cycles.</div>
          </div>
        </div>
      </section>

      <section class="section" id="primary-sources">
        <h2>üìö Primary Sources</h2>
        <div class="card">
          <div class="list">
            <div><strong>FY2024 Financials:</strong> <a href="https://www.idx.co.id/StaticData/NewsAndAnnouncement/ANNOUNCEMENTSTOCK/From_EREP/202404/20250407150103-50269-0/Financial%20Statements%20MDKA%2031%20December%202024.pdf" style="color:var(--accent);text-decoration:none;">Financial Statements (Dec 2024)</a></div>
            <div><strong>1H25 Results:</strong> <a href="https://assets.merdekabattery.com/dist/documents/Q2-2025-Merdeka-Group-Financial-Results-Presentation.pdf" style="color:var(--accent);text-decoration:none;">Q2 2025 Results Presentation</a></div>
            <div><strong>Q3 Activities:</strong> <a href="https://merdekacoppergold.com/wp-content/uploads/2025/11/Press-Release-MDKA-Q3-2025-Quarterly-Activities-Report-ENG-v2.pdf" style="color:var(--accent);text-decoration:none;">Quarterly Activities Report</a></div>
          </div>
        </div>
      </section>

      <section class="section" id="thesis-framework">
        <h2>üß≠ Thesis Framework</h2>
        <div class="card">
          <div class="list">
            <div><strong>BULL:</strong> Gold production doubles to ~205k oz (Pani + Tujuh Bukit), gold &gt;$2,500, and nickel ramps via MBMA. Multi-commodity optionality re-rates the platform.</div>
            <div><strong>BASE:</strong> Hit the lower end of guidance at ~180k oz with gold in the $2,200‚Äì2,500 range.</div>
            <div><strong>BEAR:</strong> Pani delays, gold &lt;$1,800, nickel price collapse, and MBMA losses persist.</div>
          </div>
        </div>
      </section>

      <section class="section" id="thesis-killers">
        <h2>üß® Thesis Killers</h2>
        <div class="card">
          <div class="list">
            <div><strong>Pani first gold delay:</strong> Slips beyond Q2 2026.</div>
            <div><strong>Cost inflation:</strong> AISC &gt;$1,500/oz sustained.</div>
            <div><strong>Gold downside:</strong> Gold &lt;$1,800 for an extended period.</div>
            <div><strong>MBMA cash burn:</strong> Accelerating losses or funding needs.</div>
            <div><strong>Complexity discount:</strong> Corporate structure concerns impede valuation re-rating.</div>
          </div>
        </div>
      </section>

      <section class="section" id="kpis">
        <h2>üìà KPIs To Track</h2>
        <div class="card">
          <div class="list">
            <div><strong>Gold production (TB + Pani):</strong> Track ounces separately to see the ramp.</div>
            <div><strong>AISC per oz:</strong> Margin resilience through the cycle.</div>
            <div><strong>Pani construction milestones:</strong> Progress vs schedule toward first gold.</div>
            <div><strong>Nickel production volumes:</strong> MBMA saprolite/limonite output trends.</div>
            <div><strong>MBMA profitability:</strong> EBITDA trend and unit economics.</div>
          </div>
        </div>
      </section>

      <section class="section" id="related-context">
        <h2>üîó Related Context</h2>
        <div class="card" style="display:flex;flex-direction:column;gap:14px;">
          <a href="emas-merdeka-gold.html" style="display:flex;align-items:flex-start;gap:14px;padding:14px;background:var(--surface-alt);border-radius:12px;border:1px solid var(--border);text-decoration:none;transition:border-color 0.2s,transform 0.2s;" onmouseover="this.style.borderColor='var(--accent)';this.style.transform='translateX(4px)'" onmouseout="this.style.borderColor='var(--border)';this.style.transform='none'">
            <span style="font-size:24px;">ü•á</span>
            <div>
              <div style="font-size:14px;font-weight:600;color:var(--text);">EMAS ‚Äî Pani Gold Project</div>
              <div style="font-size:12px;color:var(--text-muted);margin-top:4px;">MDKA‚Äôs gold growth engine with 2026 first production.</div>
            </div>
            <span style="margin-left:auto;color:var(--text-dim);font-size:14px;">‚Üí</span>
          </a>
        </div>
      </section>

      <section class="section" id="jargon">
        <h2>üìñ Jargon Decoder</h2>
        <div class="card">
          <div style="display:flex;flex-direction:column;gap:10px;">
            <div id="jargon-mbma" class="jargon-def" style="padding:10px;background:var(--surface-alt);border-radius:10px;">
              <strong style="color:var(--accent);">MBMA (Merdeka Battery Materials)</strong>
              <a href="#" class="jargon-back" onclick="history.back();return false;">‚Ü© back</a>
              <div style="font-size:12px;color:var(--text-muted);margin-top:4px;">MDKA‚Äôs nickel and battery materials subsidiary focused on saprolite and limonite supply.</div>
            </div>
            <div id="jargon-wmt" class="jargon-def" style="padding:10px;background:var(--surface-alt);border-radius:10px;">
              <strong style="color:var(--accent);">WMT (Wet Metric Ton)</strong>
              <a href="#" class="jargon-back" onclick="history.back();return false;">‚Ü© back</a>
              <div style="font-size:12px;color:var(--text-muted);margin-top:4px;">Measurement of ore tonnage that includes natural moisture content.</div>
            </div>
            <div id="jargon-saprolite" class="jargon-def" style="padding:10px;background:var(--surface-alt);border-radius:10px;">
              <strong style="color:var(--accent);">Saprolite</strong>
              <a href="#" class="jargon-back" onclick="history.back();return false;">‚Ü© back</a>
              <div style="font-size:12px;color:var(--text-muted);margin-top:4px;">Nickel-rich laterite ore typically used for ferronickel or NPI feedstock.</div>
            </div>
            <div id="jargon-limonite" class="jargon-def" style="padding:10px;background:var(--surface-alt);border-radius:10px;">
              <strong style="color:var(--accent);">Limonite</strong>
              <a href="#" class="jargon-back" onclick="history.back();return false;">‚Ü© back</a>
              <div style="font-size:12px;color:var(--text-muted);margin-top:4px;">Lower-grade nickel laterite ore used in HPAL processing for battery materials.</div>
            </div>
            <div id="jargon-hpal" class="jargon-def" style="padding:10px;background:var(--surface-alt);border-radius:10px;">
              <strong style="color:var(--accent);">HPAL</strong>
              <a href="#" class="jargon-back" onclick="history.back();return false;">‚Ü© back</a>
              <div style="font-size:12px;color:var(--text-muted);margin-top:4px;">High Pressure Acid Leach, a process to extract nickel/cobalt from limonite.</div>
            </div>
          </div>
        </div>
      </section>

      <p style="font-size:11px;color:var(--text-dimmer);margin-top:20px;">Sources: Indo watchlist notes, company disclosures (as of Feb 4, 2026). This is research, not financial advice.</p>
    </div>
  </main>
</div>

<script>
function toggleTheme() {
  const html = document.documentElement;
  const current = html.getAttribute('data-theme');
  const next = current === 'dark' ? 'light' : 'dark';
  html.setAttribute('data-theme', next);
  document.getElementById('theme-icon').textContent = next === 'dark' ? '‚òÄÔ∏è' : 'üåô';
  localStorage.setItem('theme', next);
}
(function() {
  const saved = localStorage.getItem('theme');
  if (saved) {
    document.documentElement.setAttribute('data-theme', saved);
    document.addEventListener('DOMContentLoaded', () => {
      const icon = document.getElementById('theme-icon');
      if (icon) icon.textContent = saved === 'dark' ? '‚òÄÔ∏è' : 'üåô';
    });
  }
})();

function slugifyHeading(text) {
  return text
    .toLowerCase()
    .replace(/[^a-z0-9\s-]/g, '')
    .trim()
    .replace(/\s+/g, '-')
    .replace(/-+/g, '-');
}

function initSectionNav() {
  const navLinks = document.getElementById('section-nav-links');
  if (!navLinks) return;

  let headings = Array.from(document.querySelectorAll('.section h2'));
  if (!headings.length) {
    headings = Array.from(document.querySelectorAll('h2'));
  }
  if (!headings.length) return;

  headings.forEach((heading) => {
    if (!heading.id) {
      heading.id = slugifyHeading(heading.textContent || '');
    }
  });

  navLinks.innerHTML = '';
  headings.forEach((heading) => {
    const link = document.createElement('a');
    link.className = 'section-link';
    link.href = `#${heading.id}`;
    link.textContent = heading.textContent || '';
    navLinks.appendChild(link);
  });

  const linkMap = new Map();
  navLinks.querySelectorAll('a').forEach((link) => {
    const targetId = link.getAttribute('href').slice(1);
    linkMap.set(targetId, link);
    link.addEventListener('click', () => setActive(targetId));
  });

  function setActive(id) {
    linkMap.forEach((link) => {
      link.classList.remove('active');
      link.removeAttribute('aria-current');
    });
    const activeLink = linkMap.get(id);
    if (activeLink) {
      activeLink.classList.add('active');
      activeLink.setAttribute('aria-current', 'true');
    }
  }

  setActive(headings[0].id);

  const observer = new IntersectionObserver(
    (entries) => {
      entries.forEach((entry) => {
        if (entry.isIntersecting) {
          setActive(entry.target.id);
        }
      });
    },
    { rootMargin: '-20% 0px -65% 0px', threshold: [0, 0.1, 0.5] }
  );

  headings.forEach((heading) => observer.observe(heading));
}

document.addEventListener('DOMContentLoaded', () => {
  initSectionNav();
});
</script>
</body>
</html>
